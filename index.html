<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="index.css"/>
<script>
let showBorders = false;
let currentMap = -1;
function toggleMap() {
  currentMap++;
  if(currentMap >= 3) currentMap = 0;
  switch(currentMap) {
    case 0:
      drawMap('rom'); //this one is the biggest, so match all others to this size
      break;
    case 1:
      drawMap('dun');
      break;
    case 2:
      drawMap('hom');
      break;
  }
}
function drawMap(name) {
  var tds = document.getElementsByTagName("td");
  for(var index=0; index < tds.length; index++) {
    var td = tds[index];
    var i = td.getAttribute('i');
    var j = td.getAttribute('j');
    td.firstChild.src = "images/"+name+"/"+name+"_"+j+"_"+i+".png";
  }
}
function generateMap(iMin, jMin, iMax, jMax) {
  var table = document.getElementById("table");
  for(var i = iMin ; i <= iMax ; i++) {
    var tr = table.insertRow();
    for(var j = jMin; j <= jMax ; j++) {
      var td = tr.insertCell();
      td.setAttribute('i', i);
      td.setAttribute('j', j);
      var img = document.createElement("img");
      img.addEventListener('error', (e)=>{e.target.src = "images/empty.png";});
      td.appendChild(img);

      if(i == 10 && j == 10) {
        var innerdiv = document.createElement("div");
        innerdiv.setAttribute("style", "position:absolute;left:95px;top:80px;width:110px;height:80px;"+(showBorders?"border:red;border-style:solid;border-width:2px;":""));

        var title = document.createElement("p");
        title.setAttribute("class", "tooltiptext");
        title.innerHTML = "Starting house";
        title.style.bottom = 80+(showBorders?2:0)+5+5+"px"; //80 from height, 2 from possible borders, 5 from arrow pointing downwards (::after), 5 for some space
        innerdiv.setAttribute("class", "tooltip");

        innerdiv.appendChild(title);
        td.appendChild(innerdiv);
      }
    }
  }
  toggleMap();
}
</script>
</head>
<body onclick="toggleMap()" onload="generateMap(3, 6, 16, 16)">
<table border="0" cellpadding="0" cellspacing="0" margin="0" id="table"/>
</body></html>